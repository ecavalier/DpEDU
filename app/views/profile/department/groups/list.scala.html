@()(implicit session: play.api.mvc.Session)
<div class="panel panel-default">
    <div class="panel-heading">Group List</div>
        <!-- Table -->
    <table class="table">
        <tr>
            <td class="col-md-2">Name</td>
            <td class="col-md-2">Students Count</td>
            <td class="col-md-3">Curator</td>
            <td class="col-md-3">Elder</td>
            <td class="col-md-2">Action</td>
        </tr>
        @for(g <- model.Department.getGroups(model.users.User.findByEmail(session.get("username").get)
                .get.asInstanceOf[model.users.DepartmentManager].departmentId.toString)) {
            @defining(model.users.User.find(g.curator.toString).get.asInstanceOf[model.users.Teacher]) {  curator=>
            <tr>
                <td><a href="@routes.DepartmentController.groupDetails(g.id.toString)">@g.name</a></td>
                <td>@model.Group.getStudentsCount(g.id)</td>
                <td><img  @if(curator.avatar!="@routes.Assets.at(\"images/anonymous.jpg\")"){
                        src="@routes.DeanController.picture(curator.avatar)"}else{
                        src="@routes.Assets.at("images/anonymous.jpg")"}
                        style="width : 60px; height:60px" class="img-circle">
                        @curator.fullName</td>
                    <td>@if(g.elder != null){
                    @defining(model.users.User.find(g.elder.toString).get.asInstanceOf[model.users.Student]) {  elder=>
                        <img  @if(elder.avatar!="@routes.Assets.at(\"images/anonymous.jpg\")"){
                        src="@routes.DeanController.picture(elder.avatar)"}else{
                        src="@routes.Assets.at("images/anonymous.jpg")"}
                        style="width : 60px; height:60px" class="img-circle">
                        @elder.fullName
                    }}</td>
                <td><a class="btn btn-danger" href="@routes.DepartmentController.removeGroup(g.id.toString)">Remove</a></td>
            </tr>
            }
        }
        </table>
</div>

<div class="row">
    <div class="col-md-12">
        <a class="btn btn-primary" data-toggle="modal" data-target="#createForm">Add New</a>
    </div>
</div>
@form("Add Group", "createForm", "Create", null, routes.DepartmentController.addGroup())
